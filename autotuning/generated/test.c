const char k0_source[] =
""
""
""
"__kernel __attribute__ ((reqd_work_group_size(1, 1, 1)))"
"void k0(global float* restrict output, int n161, const global float* restrict e162, const global float* restrict e163){"
"  /* Start of moved local vars */"
"  /* End of moved local vars */"
"  /* mapWorkGroup */"
"  for (int wg_id_752 = get_group_id(0); wg_id_752 < (1 + ((-1 + n161) / 16)); wg_id_752 = 32 + wg_id_752) {"
"    /* mapLocal */"
"    for (int l_id_753 = get_local_id(0); l_id_753 < 4; l_id_753 = 1 + l_id_753) {"
"      /* oclReduceSeq */"
"      {"
"        float4 x687;"
"        x687 = (float4)(0.0f);"
"        /* unrolling loop of 3 */"
"        if (wg_id_752 < (n161 / 16)) {"
"          {"
"            int idx754 = (wg_id_752 * 16) + (4 * l_id_753);"
"            if (wg_id_752 < (n161 / 16)) {"
"              {"
"                int idx755 = (wg_id_752 * 16) + (1 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx756 = (wg_id_752 * 16) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx757 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx755], e163[idx756], e163[idx757]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx758 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx755], e163[idx756], e163[idx758]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx759 = (-16 + n161) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx760 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx755], e163[idx759], e163[idx760]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx761 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx755], e163[idx759], e163[idx761]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"             else {"
"              {"
"                int idx762 = (-16 + n161) + (1 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx763 = (wg_id_752 * 16) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx764 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx762], e163[idx763], e163[idx764]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx765 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx762], e163[idx763], e163[idx765]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx766 = (-16 + n161) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx767 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx762], e163[idx766], e163[idx767]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx768 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx754], e163[idx762], e163[idx766], e163[idx768]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"            "
"          }"
"          "
"        }"
"         else {"
"          {"
"            int idx769 = (-16 + n161) + (4 * l_id_753);"
"            if (wg_id_752 < (n161 / 16)) {"
"              {"
"                int idx770 = (wg_id_752 * 16) + (1 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx771 = (wg_id_752 * 16) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx772 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx770], e163[idx771], e163[idx772]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx773 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx770], e163[idx771], e163[idx773]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx774 = (-16 + n161) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx775 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx770], e163[idx774], e163[idx775]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx776 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx770], e163[idx774], e163[idx776]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"             else {"
"              {"
"                int idx777 = (-16 + n161) + (1 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx778 = (wg_id_752 * 16) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx779 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx777], e163[idx778], e163[idx779]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx780 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx777], e163[idx778], e163[idx780]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx781 = (-16 + n161) + (2 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx782 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx777], e163[idx781], e163[idx782]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx783 = (-16 + n161) + (3 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[0]) * (float4)(e163[idx769], e163[idx777], e163[idx781], e163[idx783]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"            "
"          }"
"          "
"        }"
"        "
"        if (wg_id_752 < (n161 / 16)) {"
"          {"
"            int idx784 = (wg_id_752 * 16) + (1 + (4 * l_id_753));"
"            if (wg_id_752 < (n161 / 16)) {"
"              {"
"                int idx785 = (wg_id_752 * 16) + (2 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx786 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx787 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx785], e163[idx786], e163[idx787]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx788 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx785], e163[idx786], e163[idx788]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx789 = (-16 + n161) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx790 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx785], e163[idx789], e163[idx790]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx791 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx785], e163[idx789], e163[idx791]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"             else {"
"              {"
"                int idx792 = (-16 + n161) + (2 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx793 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx794 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx792], e163[idx793], e163[idx794]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx795 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx792], e163[idx793], e163[idx795]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx796 = (-16 + n161) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx797 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx792], e163[idx796], e163[idx797]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx798 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx784], e163[idx792], e163[idx796], e163[idx798]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"            "
"          }"
"          "
"        }"
"         else {"
"          {"
"            int idx799 = (-16 + n161) + (1 + (4 * l_id_753));"
"            if (wg_id_752 < (n161 / 16)) {"
"              {"
"                int idx800 = (wg_id_752 * 16) + (2 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx801 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx802 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx800], e163[idx801], e163[idx802]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx803 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx800], e163[idx801], e163[idx803]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx804 = (-16 + n161) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx805 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx800], e163[idx804], e163[idx805]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx806 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx800], e163[idx804], e163[idx806]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"             else {"
"              {"
"                int idx807 = (-16 + n161) + (2 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx808 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx809 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx807], e163[idx808], e163[idx809]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx810 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx807], e163[idx808], e163[idx810]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx811 = (-16 + n161) + (3 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx812 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx807], e163[idx811], e163[idx812]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx813 = (-16 + n161) + (4 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[1]) * (float4)(e163[idx799], e163[idx807], e163[idx811], e163[idx813]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"            "
"          }"
"          "
"        }"
"        "
"        if (wg_id_752 < (n161 / 16)) {"
"          {"
"            int idx814 = (wg_id_752 * 16) + (2 + (4 * l_id_753));"
"            if (wg_id_752 < (n161 / 16)) {"
"              {"
"                int idx815 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx816 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx817 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx815], e163[idx816], e163[idx817]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx818 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx815], e163[idx816], e163[idx818]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx819 = (-16 + n161) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx820 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx815], e163[idx819], e163[idx820]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx821 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx815], e163[idx819], e163[idx821]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"             else {"
"              {"
"                int idx822 = (-16 + n161) + (3 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx823 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx824 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx822], e163[idx823], e163[idx824]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx825 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx822], e163[idx823], e163[idx825]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx826 = (-16 + n161) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx827 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx822], e163[idx826], e163[idx827]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx828 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx814], e163[idx822], e163[idx826], e163[idx828]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"            "
"          }"
"          "
"        }"
"         else {"
"          {"
"            int idx829 = (-16 + n161) + (2 + (4 * l_id_753));"
"            if (wg_id_752 < (n161 / 16)) {"
"              {"
"                int idx830 = (wg_id_752 * 16) + (3 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx831 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx832 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx830], e163[idx831], e163[idx832]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx833 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx830], e163[idx831], e163[idx833]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx834 = (-16 + n161) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx835 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx830], e163[idx834], e163[idx835]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx836 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx830], e163[idx834], e163[idx836]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"             else {"
"              {"
"                int idx837 = (-16 + n161) + (3 + (4 * l_id_753));"
"                if (wg_id_752 < (n161 / 16)) {"
"                  {"
"                    int idx838 = (wg_id_752 * 16) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx839 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx837], e163[idx838], e163[idx839]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx840 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx837], e163[idx838], e163[idx840]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                 else {"
"                  {"
"                    int idx841 = (-16 + n161) + (4 + (4 * l_id_753));"
"                    if (wg_id_752 < (n161 / 16)) {"
"                      {"
"                        int idx842 = (wg_id_752 * 16) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx837], e163[idx841], e163[idx842]));"
"                      }"
"                      "
"                    }"
"                     else {"
"                      {"
"                        int idx843 = (-16 + n161) + (5 + (4 * l_id_753));"
"                        x687 = x687 + ((float4)(e162[2]) * (float4)(e163[idx829], e163[idx837], e163[idx841], e163[idx843]));"
"                      }"
"                      "
"                    }"
"                    "
"                  }"
"                  "
"                }"
"                "
"              }"
"              "
"            }"
"            "
"          }"
"          "
"        }"
"        "
"        if ((((4 * l_id_753) + (16 * wg_id_752)) / 16) < (n161 / 16)) {"
"          {"
"            int i844 = (4 * l_id_753) + (16 * wg_id_752);"
"            vstore4(x687, 0, &output[i844]);"
"          }"
"          "
"        }"
"         else {"
"          {"
"            int i844 = ((4 * l_id_753) + (16 * wg_id_752)) - (16 + (-1 * (n161 % 16)));"
"            vstore4(x687, 0, &output[i844]);"
"          }"
"          "
"        }"
"        "
"      }"
"      "
"    }"
"    "
"  }"
"  "
"}"
"";

#define loadKernel(ctx, id)\
  loadKernelFromSource(ctx, #id, id##_source, sizeof(id##_source) - 1)

#include "ocl/ocl.h"
struct fun_t {
  Kernel k0;
};

typedef struct fun_t fun_t;

void fun_init(Context ctx, fun_t* self){
  (*self).k0 = loadKernel(ctx, k0);
}

void fun_destroy(Context ctx, fun_t* self){
  destroyKernel(ctx, (*self).k0);
}

void fun_run(Context ctx, fun_t* self, Buffer moutput, int n161, Buffer me162, Buffer me163){
  {
    DeviceBuffer b0 = deviceBufferSync(ctx, moutput, n161 * sizeof(float), DEVICE_WRITE);
    DeviceBuffer b2 = deviceBufferSync(ctx, me162, 3 * sizeof(float), DEVICE_READ);
    DeviceBuffer b3 = deviceBufferSync(ctx, me163, (2 + n161) * sizeof(float), DEVICE_READ);
    const size_t global_size[3] = (const size_t[3]){32, 1, 1};
    const size_t local_size[3] = (const size_t[3]){1, 1, 1};
    const KernelArg args[4] = (const KernelArg[4]){KARG(b0), KARG(n161), KARG(b2), KARG(b3)};
    launchKernel(ctx, (*self).k0, global_size, local_size, 4, args);
  }
  
}

void fun_init_run(Context ctx, Buffer moutput, int n161, Buffer me162, Buffer me163){
  fun_t fun;
  fun_init(ctx, &fun);
  fun_run(ctx, &fun, moutput, n161, me162, me163);
  fun_destroy(ctx, &fun);
}




int main(int argc, char** argv) {
  Context ctx = createDefaultContext();
  fun_t fun;
  fun_init(ctx, &fun);

  
const int N = 32;

Buffer input = createBuffer(ctx, N * sizeof(float), HOST_READ | HOST_WRITE | DEVICE_READ);
Buffer output = createBuffer(ctx, N * sizeof(float), HOST_READ | HOST_WRITE | DEVICE_WRITE);

float* in = hostBufferSync(ctx, input, N * sizeof(float), HOST_WRITE);
for (int i = 0; i < N; i++) {
  in[i] = 1;
}



  int iterations = atoi(argv[1]);
  for (int sample = 0; sample < iterations; sample++) {
    
fun_run(ctx, &fun, output, N, input, input);

  }
  
// TODO: could check output here

destroyBuffer(ctx, input);
destroyBuffer(ctx, output);

  fun_destroy(ctx, &fun);
  destroyContext(ctx);
  return EXIT_SUCCESS;
}

